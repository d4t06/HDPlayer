import{audio,gotopBtn,musicVolume,nextBtn,playBtn,prevBtn,randomBtn,rePeatBtn,timeSlider}from"./constant.js";import{updateVolume}from"./handleAudioEvent.js";import{setLocalStorage}from"./utils/appHelper.js";const $$=document.querySelectorAll.bind(document);export default function handleEvent(){const t=this,o=$$(".song-item");window.innerWidth;o.forEach(((o,e)=>{o.onclick=n=>{n.target.parentElement.classList.contains("song-detail")||t.currentSong&&o.id===t.currentSong.id||(t.currentIndex=e,t.loadCurrentSong())}})),musicVolume.onclick=function(t){let o=musicVolume.offsetWidth,e=(t.clientX-25)/o;updateVolume(+e.toFixed(2)),setLocalStorage("volume",e.toFixed(2))},musicVolume.onwheel=function(t){t.preventDefault();const o=.05;let e=audio.volume;t.deltaY>0?e-o>0?e-=o:e=0:e+o<1?e+=o:e=1,updateVolume(+e.toFixed(2)),setLocalStorage("volume",e.toFixed(2))},timeSlider.onclick=o=>{let e=timeSlider.offsetWidth,n=Math.floor((o.clientX-25)/e*100),i=audio.duration*n/100;audio.currentTime=+i.toFixed(2),t.isPlaying||this.isWaiting||(console.log("playe"),audio.play())},playBtn.onclick=function(){t.isPlaying?audio.pause():audio.play()},nextBtn.onclick=function(){t.nextSong(),t.endOfList=!1},prevBtn.onclick=function(){t.prevSong()},randomBtn.onclick=function(){const o=!t.isRandom;t.isRandom=o,setLocalStorage("isRandom",o),randomBtn.classList.toggle("active",o)},rePeatBtn.onclick=function(){const o=!t.isRepeat;t.isRepeat=o,setLocalStorage("isRepeat",o),rePeatBtn.classList.toggle("active",o)},gotopBtn.onclick=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0}}