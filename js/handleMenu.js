import{setLocalStorage}from"./utils/appHelper.js";import{onPauseHandle}from"./handleEvent.js";const $=document.querySelector.bind(document),level2=$(".level2");export const HandleGoBack=e=>{$(".menu-back-btn").onclick=()=>{level2.classList.remove("open")}};const handleMenuEvents=e=>{const s=$(".switch"),t=$("#songListSelect"),n=$(".toggle-info"),l=$(".player");n.onclick=e=>{const s=e.target.getAttribute("data-for"),t=$(`.${s}`);t&&(level2.classList.add("open"),t.style.display="block",HandleGoBack())},s.onclick=()=>{const t=!e.isDark;e.isDark=t,setLocalStorage("isDark",t);$("body").classList.toggle("dark",e.isDark),s.classList.toggle("dark",e.isDark),l.classList.toggle("dark",e.isDark)},t.onchange=s=>{onPauseHandle(e);if(s.target.value){const t=e.playlists.find((e=>e.name===s.target.value)),n=getPlaylistSongs(t,e.songs);e.playlistSongs=n,e.song_in="playlist"}else e.song_in="songs";e.currentIndex=0,e.getActuallySongs(),e.render(),e.loadCurrentSong(),e.handleEvents()}},getPlaylistSongs=(e,s)=>s.filter((s=>e.song_ids.includes(s.id))),handleMenu=function(){handleMenuEvents(this)};export default handleMenu;